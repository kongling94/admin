webpackJsonp([1],{"5O++":function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"/* .formDialog >>> .el-upload--text\ndisplay inline-block\nwidth 80px\nheight 30px\nborder none */\n.userinfo .userinfo-title[data-v-14ae557f] {\n  height: 55px;\n  line-height: 35px;\n  padding: 10px 0;\n  margin: 0 20px;\n  border-bottom: 1px solid #e6e5e6;\n}\n.userinfo .userinfo-title .title_text[data-v-14ae557f] {\n  margin-top: 5px;\n  color: #52b2fb;\n}\n.userinfo .userinfo-title .title_text span[data-v-14ae557f] {\n  position: relative;\n}\n.userinfo .userinfo-title .title_text span[data-v-14ae557f]::after {\n  content: '';\n  position: absolute;\n  bottom: -14px;\n  left: 0;\n  width: calc(100% + 5px);\n  height: 2px;\n  background-color: #52b2fb;\n}\n.userinfo .userinfo-title .title_addBtn[data-v-14ae557f] {\n  text-align: right;\n}\n.userinfo .userinfo-title .title_addBtn .add-application[data-v-14ae557f] {\n  padding: 0;\n  width: 120px;\n  height: 35px;\n}\n.userinfo .userinfo-list[data-v-14ae557f] {\n  padding: 20px 0;\n}\n",""])},Fvh1:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.uploadFile[data-v-ce6f7cb2] .el-upload--text {\n  width: 80px;\n  height: 32px;\n  border: none;\n  margin-left: 8px;\n}\n.uploadFile[data-v-ce6f7cb2] .el-upload-list {\n  width: 312px;\n  height: 32px;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  float: left;\n}\n.uploadFile[data-v-ce6f7cb2] .el-upload-list .el-upload-list__item:first-child {\n  margin-top: 5px;\n}\n.uploadFile[data-v-ce6f7cb2] .el-upload-list .el-upload-list__item:first-child:hover {\n  background-color: #fff;\n}\n.el-dialog__wrapper .el-dialog__body .formDialog[data-v-ce6f7cb2] {\n  padding: 0 25px;\n}\n.el-dialog__wrapper .el-dialog__body .formDialog .el-form-item[data-v-ce6f7cb2] {\n  margin-bottom: 24px;\n}\n.el-dialog__wrapper .el-dialog__body .formDialog .el-form-item .el-form-item__label[data-v-ce6f7cb2] {\n  font-size: 16px;\n}\n.el-dialog__wrapper .el-dialog__body .formDialog .el-form-item .el-input[data-v-ce6f7cb2],\n.el-dialog__wrapper .el-dialog__body .formDialog .el-form-item .el-textarea[data-v-ce6f7cb2] {\n  width: 400px;\n}\n.el-dialog__wrapper .el-dialog__body .formDialog .el-form-item .el-input[data-v-ce6f7cb2] .el-textarea__inner,\n.el-dialog__wrapper .el-dialog__body .formDialog .el-form-item .el-textarea[data-v-ce6f7cb2] .el-textarea__inner {\n  height: 200px;\n  resize: none;\n}\n.el-dialog__wrapper .el-dialog__body .formDialog .el-form-item .form_file[data-v-ce6f7cb2] {\n  width: 312px;\n}\n.el-dialog__wrapper .el-dialog__body .formDialog .el-form-item[data-v-ce6f7cb2]:last-child {\n  margin-bottom: 0;\n}\n.el-dialog__wrapper .el-dialog__footer[data-v-ce6f7cb2] {\n  margin-bottom: 35px;\n}\n.el-dialog__wrapper .el-dialog__footer .el-button[data-v-ce6f7cb2] {\n  width: 135px;\n  height: 40px;\n}\n.el-dialog__wrapper .el-dialog__footer .el-button[data-v-ce6f7cb2]:last-child {\n  margin-left: 90px;\n}\n",""])},YiEz:function(t,a,e){var n=e("sAZT");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("d6f9d06a",n,!1,{})},Zrlr:function(t,a,e){"use strict";a.__esModule=!0,a.default=function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}},fz1r:function(t,a,e){var n=e("5O++");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("2e0ece8c",n,!1,{})},jOk1:function(t,a,e){"use strict";var n=e("zL8q"),o={name:"tableList",props:{tableHeader:{type:Array},tableData:{type:Array,default:[]},showControl:{type:Boolean,default:!1}},data:function(){return{page:1,pageSize:20,totalData:[],currentPageData:[]}},methods:{refreshTable:function(){this.$emit("isUploaded"),this.handleCurrentChange(1),this.page=1},copyAddress:function(t,a){this.$copyText(a.link).then(function(t){Object(n.Message)({message:"复制成功",type:"success"})},function(t){Object(n.Message)({message:"复制失败",type:"error"})})},handleUpdata:function(t){this.$emit("updataDialog",t)},styleHeaderBg:function(t){t.row,t.rowIndex;return"background-color:#e7eff5;font-size:14px;font-weight:normal;color:#959595;"},styleRowBg:function(t){t.row,t.rowIndex;return"background-color:#f5f9fb;"},styleCell:function(t){t.row,t.rowIndex;return"font-size:14px;color:#959595;"},handleCurrentChange:function(t){var a=this.totalData,e=Math.floor(a/this.pageSize);return t=t>e?e:t,this.page=t,this.currentPageData=a.slice((t-1)*this.pageSize,t*this.pageSize)},initData:function(t){this.totalData=t}},watch:{currentPageData:function(t){this.currentPageData=t},tableData:function(t){this.initData(t),this.handleCurrentChange(1)}},created:function(){var t=this;setTimeout(function(){t.handleCurrentChange(1)},1e3)},mounted:function(){}},i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"tableList"},[e("el-table",{directives:[{name:"show",rawName:"v-show",value:t.tableData,expression:"tableData"}],staticStyle:{width:"100%"},attrs:{data:t.currentPageData,"header-cell-style":t.styleHeaderBg,"cell-style":t.styleCell,"row-class-name":t.styleRowBg}},[t._l(t.tableHeader,function(t){return e("el-table-column",{key:t.id,attrs:{prop:t.prop,label:t.label}})}),t._v(" "),t.showControl?e("el-table-column",{attrs:{prop:"handle",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.handleUpdata(a.row)}}},[t._v("版本更新")]),t._v(" "),e("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){t.copyAddress(a.$index,a.row)}}},[t._v("复制链接")])]}}])}):t._e()],2),t._v(" "),e("el-row",{staticClass:"tableList_footer"},[e("el-button",{staticClass:"refreshBtn",attrs:{type:"primary",icon:"el-icon-lx-refresh"},on:{click:t.refreshTable}}),t._v(" "),e("el-pagination",{staticClass:"pages",attrs:{background:"",layout:"prev, pager, next","page-size":20,"current-page":t.page,total:t.totalData.length},on:{"update:currentPage":function(a){t.page=a},"current-change":t.handleCurrentChange}})],1)],1)};i._withStripped=!0;var l={render:i,staticRenderFns:[]},r=l;var s=!1;var d=e("VU/8")(o,r,!1,function(t){s||e("YiEz")},"data-v-3eb6c14b",null);d.options.__file="src\\components\\common\\tableList.vue";a.a=d.exports},mvlS:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("jOk1"),o=e("Zrlr"),i=e.n(o),l=function t(a){i()(this,t),this.name=a.name,this.fileList=[],this.app_id=a.appversion[0].app_id,this.content="",this.version_name=""},r=e("zL8q"),s={name:"updataDialog",props:{showDialog:{type:Boolean,default:!1},dialogData:{type:Object},isUpdata:{type:Boolean,default:!1}},data:function(){return{labelPosition:"left",formRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],version_name:[{required:!0,message:"请输入一个版本号",trigger:"blur"}],file:[{required:!0,message:"请选择需要文件",trigger:"change"}],content:[{required:!0,message:"请填写活动形式",trigger:"blur"}]},addFormData:{name:"",version_name:"",content:"",fileList:[{name:"",url:""}]}}},methods:{maxFile:function(t,a){},openDialog:function(){if(!this.isUpdata||!this.dialogData)return this.addFormData={name:"",version_name:"",content:""};this.addFormData=new l(this.dialogData)},submitForm:function(){this.$refs.upload.submit()},beforeUpload:function(t){var a=this,e=new FormData;e.append("file",t),e.append("app_id",this.addFormData.app_id),e.append("name",this.addFormData.name),e.append("version_name",this.addFormData.version_name),e.append("content",this.addFormData.content);var n=this.isUpdata?"/admin/appversion/update":"/admin/appversion/add";this.$post(n,{data:e,headers:{"Content-Type":"multipart/form-data"}}).then(function(t){1===t.code&&(a.cancelDialog(),Object(r.Message)({type:"success",message:t.msg}),a.$emit("isUploaded"))}).catch(function(t){})},cancelDialog:function(){this.addFormData={name:"",version_name:"",content:""},this.$emit("watchDialog")}},computed:{},created:function(){},mounted:function(){}},d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dialog"},[e("el-dialog",{ref:"addApplication",attrs:{title:t.isUpdata?"更新版本":"添加应用",visible:t.showDialog,width:"600px",rules:t.formRules,"before-close":t.cancelDialog,center:""},on:{"update:visible":function(a){t.showDialog=a},open:t.openDialog}},[e("el-form",{ref:"addFormData",staticClass:"formDialog",attrs:{"label-position":t.labelPosition,"label-width":"80px",model:t.addFormData}},[e("el-form-item",{attrs:{label:"应用名",prop:"name"}},[e("el-input",{attrs:{disabled:t.isUpdata,placeholder:"请输入名称"},model:{value:t.addFormData.name,callback:function(a){t.$set(t.addFormData,"name",a)},expression:"addFormData.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"版本号",prop:"version_name"}},[e("el-input",{attrs:{placeholder:"请输入版本号"},model:{value:t.addFormData.version_name,callback:function(a){t.$set(t.addFormData,"version_name",a)},expression:"addFormData.version_name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"上传文件",prop:"file"}},[e("el-upload",{ref:"upload",staticClass:"uploadFile",attrs:{action:"","before-upload":t.beforeUpload,accept:".apk,.jpg",limit:1,"auto-upload":!1,"file-list":t.addFormData.fileList,"on-exceed":t.maxFile}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"版本说明",prop:"content"}},[e("el-input",{staticClass:"form_textarea",attrs:{type:"textarea",placeholder:"请输入更新内容"},model:{value:t.addFormData.content,callback:function(a){t.$set(t.addFormData,"content",a)},expression:"addFormData.content"}})],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelDialog}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)};d._withStripped=!0;var p={render:d,staticRenderFns:[]},c=p;var f=!1;var u=e("VU/8")(s,c,!1,function(t){f||e("qDH0")},"data-v-ce6f7cb2",null);u.options.__file="src\\components\\page\\Updata\\updataDialog.vue";var g=u.exports,m={name:"userInfo",components:{tablelist:n.a,updataDialog:g},data:function(){return{showDialog:!1,tableHeader:[{label:"UID",prop:"id"},{label:"APP名",prop:"name"},{label:"当前版本",prop:"appversion[0].version_name"},{label:"发布时间",prop:"create_time"},{label:"最近更新",prop:"appversion[0].create_time"},{label:"下载量",prop:"appversion[0].count"}],tableData:[],isUpdata:!1,dialogData:null}},methods:{_getData:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$post("/admin/app").then(function(a){t.tableData=a.data.list}),a.close()},openDialog_add:function(){this.dialogData=null,this.isUpdata=!1,this.showDialog=!0},closeDialog:function(){this.showDialog=!1},updataDialog:function(t){this.isUpdata=!0,this.dialogData=t,this.showDialog=!0}},mounted:function(){this._getData()}},h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"userinfo"},[e("el-row",{staticClass:"userinfo-title",attrs:{type:"flex",justify:"space-between"}},[e("el-col",{staticClass:"title_text",attrs:{span:12}},[e("span",[t._v("应用列表")])]),t._v(" "),e("el-col",{staticClass:"title_addBtn",attrs:{span:12}},[e("button",{staticClass:"el-button el-button--primary add-application",attrs:{type:"button"},on:{click:t.openDialog_add}},[t._v("添加应用")])])],1),t._v(" "),e("div",{staticClass:"userinfo-list"},[e("tablelist",{ref:"tableList",attrs:{tableHeader:t.tableHeader,tableData:t.tableData,showControl:!0},on:{updataDialog:t.updataDialog,isUploaded:t._getData}})],1),t._v(" "),e("updataDialog",{attrs:{showDialog:t.showDialog,isUpdata:t.isUpdata,dialogData:t.dialogData},on:{watchDialog:t.closeDialog,isUploaded:t._getData}})],1)};h._withStripped=!0;var b={render:h,staticRenderFns:[]},_=b;var v=!1;var D=e("VU/8")(m,_,!1,function(t){v||e("fz1r")},"data-v-14ae557f",null);D.options.__file="src\\components\\page\\Updata\\updata.vue";a.default=D.exports},qDH0:function(t,a,e){var n=e("Fvh1");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("76d165d4",n,!1,{})},sAZT:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.tableList[data-v-3eb6c14b] {\n  padding: 0 20px;\n  font-size: 18px;\n}\n.tableList .tableList_footer[data-v-3eb6c14b] {\n  text-align: right;\n  margin-top: 25px;\n}\n.tableList .tableList_footer .refreshBtn[data-v-3eb6c14b] {\n  vertical-align: bottom;\n  height: 32px;\n  font-size: 14px;\n}\n.tableList .tableList_footer .pages[data-v-3eb6c14b] {\n  display: inline-block;\n}\n",""])}});